{% extends 'base.html' %}

{% block content %}
    {% if search_results %}
        <h2>Search results for: <em>{{ request.GET.search|title }}</em></h2>
        <br>
        {% for post in search_results %}
            <div class="card mb-3" style="max-width: 1000px;">
                <div class="row g-0">
                <div class="col-md-4">
                    <img src="{{ post.cover.url }}" class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                    <h3 class="card-title">{{ post.title }}</h3>
                    <small class="text-muted card-text">{{ post.category }} | {{ post.date_created|date:"F j, Y" }}</small>
                    <p class="card-text">{{post.content|safe}}</p>
                    <br>
                    <button class="view-post-btn"><a href="{{ post.get_absolute_url }}">View Post</a></button>
                    </div>
                </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
    <div class="container-fluid error-container">
        <P>No results match your search.</P>
        <p>Please try another one.</p>
        <form method="GET" action="{% url 'search' %}" class="error-form d-flex">
            <button class="btn" type="submit"><i class="fas fa-search"></i></button>
            <input class="form-control error-search-box me-2" type="search" name="search" value="{{request.GET.search }}" placeholder="Search" aria-label="Search">
        </form>
    </div>
    {% endif %}
{% endblock %}